<!DOCTYPE html>
<html>
  <head>
    <title>PhoneGap Application</title>
    <script type="text/javascript" charset="utf-8" src="cordova.js"></script>
    <script type="text/javascript" charset="utf-8">
    <script type="text/javascript" charset="utf-8" src="phonegap.js"></script>
    <script type="text/javascript">

/*summary
 * 
 * 1. created a watch variable called watchID which is equal to null
 * 2. addEventListener for the deviceready event..
 * 3.  and caught it with the onDeviceReady method
 * 4. then we ran the start watch which used the navigator.accelerometer.watchAcceleration
 * 5. .. and if that works then it will call the onSuccess method  .
 * .. and then we will just output the values of the  acceleration.x y & z to this DIV <div id="accelerometer">Waiting for accelerometer..<
 * 
 * 
 */
/*
   document.addEventListener("deviceready", onDeviceReady, false);

    // device APIs are available
    //
    function onDeviceReady() {
        var element = document.getElementById('deviceProperties');
        element.innerHTML = 'Device Name: '     + device.name     + '<br />' +
                            'Device Cordova: '  + device.cordova  + '<br />' +
                            'Device Platform: ' + device.platform + '<br />' +
                            'Device UUID: '     + device.uuid     + '<br />' +
                            'Device Model: '    + device.model    + '<br />' +
                            'Device Version: '  + device.version  + '<br />';
    }

*/




    // create a Variable outside of function onDeviceReady
    var WatchID =  null;
    // Wait for PhoneGap to load
    document.addEventListener("deviceready", onDeviceReady, false);

    // when PhoneGap is ready ..this function will run
    function onDeviceReady() {
        //call another method
        startWatch(); 
    }
    
    //create the startWatch function i am calling from onDeviceReady
    function startWatch(){
        //variable called options 
        //3 seconds or 3k milliseconds
        //time to go by before accelometer is refreshed
        var options = {frequency: 3000}; 
        
        /*from these URL's
            http://docs.phonegap.com/en/3.0.0/cordova_accelerometer_accelerometer.md.html#Accelerometer
            http://docs.phonegap.com/en/3.0.0/cordova_accelerometer_accelerometer.md.html#accelerometer.watchAcceleration
            ...
            So the library:        accelerometer.watchAcceleration
            Does this:         At a regular interval, get the acceleration along the x, y, and z axis.
        
        // The accelerometer.watchAcceleration will take a few parameters
        // .. The  callback functions will have 3 paramters 
        var watchID = navigator.accelerometer.watchAcceleration(accelerometerSuccess,   // 1st is onSuccess
                                                       accelerometerError,              // 2nd is if we got an error
                                                       [accelerometerOptions]);         // 3rd is a couple of option
                  
        */       
       //notice the 3rd parameter below "option"  .. then notice above var options = {frequency, 3000};
        
        //these are call back functions..
        // we run this "onSuccess" if it's successful
        // if it's an error then we run this method "onError"
        watchID = navigator.accelerometer.watchAcceleration(onSuccess,onError,options);  
    }
    
    
    function stopWatch(){
        //line 9 above stopWatch() was set to null
        //so by describing an if statement it is saying "if the watchID is not null"
        //.. 
        //and we set the watchID equal to the StartWatch accelleration object
        if(watchID){
            //clearWatch will clear any watch that is going on, then pass the watchID to that or to the clearWatch function
            navigator.acceleromter.clearWatch(watchID);
            //then we'll put the watchID to null      
            watchID = null;
        }
    }
    
    //two items left to do create the onSuccess method and the onError method
    // we pass it a parameter so that we can run it in our 'function or method' (they means same thing)
    function onSuccess(acceleration){
        //create a variable called element
        
        var element = document.getElementById('accelerometer')
        //innerHTML is a method where we can add whatever we want to that DIV (noted below line 85)
        element.innerHTML = 'Acceleration X: '+ acceleration.x + '<br />'+   //'<br />' is a line break 
       // "+" is concatenation or appending .. and we can use acceleration b/c we passed in acceleromter into the parameter
                            'Acceleration Y: '+ acceleration.y + '<br />'+
                            'Acceleration Z: '+ acceleration.z + '<br />'+
                            'Timestamp: '     + acceleration.timestamp + '<br />';
                            
    }
    
    function onError(){
        alert('There was a problem');
    }

    </script>
  </head>
  <body>
      //this will output our variables
      <div id="accelerometer">Waiting for accelerometer..</div>
  </body>
</html>